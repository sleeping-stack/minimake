# 笔记

[makefile语法规则](https://www.bilibili.com/video/BV1tyWWeeEpp/?spm_id_from=333.337.search-card.all.click&vd_source=34d0f8835a0912d9914f5e0c76e83fd1)

- strchr 是C标准库中的一个字符串处理函数，用于在字符串中查找指定字符的第一次出现位置。

~~~c
#include <string.h>
char *strchr(const char *str, int c);
// 参数说明
// str: 要搜索的字符串（const char *类型）
// c: 要查找的字符（int类型，实际使用时会转换为char）
// 返回值
// 成功: 返回指向第一次出现字符c的指针
// 失败: 返回NULL（未找到指定字符）
~~~

- fgets()函数的工作原理：

>从文件中读取一行（遇到'\n'或EOF停止）
将读取的内容（包括换行符'\n'）存储到字符数组中
自动在末尾添加空字符'\0'

- memove

- strtok

- access() 用于“用调用进程的真实用户/组ID”测试文件的存在性与访问权限，不改变文件，不打开文件。

~~~C
// 头文件
#include <unistd.h>
#include <errno.h>

// 原型
int access(const char *pathname, int mode);

// mode 取值（可按位或）
// F_OK 是否存在 (existence)
// R_OK 读权限 (read)
// W_OK 写权限 (write)
// X_OK 执行/搜索权限 (execute/search)
// 示例：
if (access("data.txt", F_OK) == 0) { /* 存在 */ }
if (access("script.sh", R_OK | X_OK) == 0) { /* 可读并可执行 */ }

// 返回值
// 0 表示全部测试通过
// -1 表示失败，并设置 errno

// 常见 errno
// ENOENT 路径中某一部分或文件不存在
// ENOTDIR 路径中要求是目录的部分不是目录
// EACCES 权限不足（包含目录的执行(遍历)权限不足）
// EROFS 只读文件系统上请求写权限
// ELOOP 符号链接循环
// ENAMETOOLONG 路径过长
// EFAULT 指针非法（用户空间外）
// EINVAL mode 无效（很少见，一般自己拼错）
~~~

# 遇到的难点

1. 阶段二任务一解析makefile时一直发生图中错误，最后发现是因为将这么大的目标块数组放在栈上会导致栈溢出（`Target_block 中 commands[1000][1000]`，改为在堆上分配内存解决

![报错](./image/1.png)